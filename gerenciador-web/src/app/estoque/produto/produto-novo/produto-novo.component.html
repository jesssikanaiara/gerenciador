<section>
    <mat-card>
        <mat-card-header>
            <div mat-card-avatar>
                <mat-icon aria-hidden="false" aria-label="Example home icon">inventory_2</mat-icon>
            </div>
            <mat-card-title>Produto</mat-card-title>
        </mat-card-header>
        <mat-card-content [formGroup]="form">
            <p>
                <mat-form-field>
                    <mat-label>Código</mat-label>
                    <input matInput type="number" formControlName="codigoBarras">
                    <mat-error *ngIf="form.invalid">{{obterMensagemErro('codigoBarras')}}</mat-error>
                </mat-form-field>
                <mat-form-field>
                    <mat-label>Nome</mat-label>
                    <input matInput formControlName="nome">
                    <mat-error *ngIf="form.invalid">{{obterMensagemErro('nome')}}</mat-error>
                </mat-form-field>
            </p>
            <p>
                <mat-form-field>
                    <mat-label>Valor de Compra Kg</mat-label>
                    <input matInput currencyMask formControlName="valorCompra">
                    <mat-error *ngIf="form.invalid">{{obterMensagemErro('valorCompra')}}</mat-error>
                </mat-form-field>
                <mat-form-field>
                    <mat-label>Valor de Venda Kg</mat-label>
                    <input matInput currencyMask formControlName="valorVenda">
                    <mat-error *ngIf="form.invalid">{{obterMensagemErro('valorVenda')}}</mat-error>
                </mat-form-field>
            </p>
            <p>
                <mat-form-field *ngIf="categorias">
                    <mat-label>Categoria</mat-label>
                    <mat-select formControlName="categoriaId">
                        <mat-option *ngFor="let c of categorias" [value]="c.id">
                            {{c.nome}}
                        </mat-option>
                    </mat-select>
                    <mat-error *ngIf="form.invalid">{{obterMensagemErro('categoriaId')}}</mat-error>
                </mat-form-field>
                <mat-form-field>
                    <mat-label>Percentual Imposto</mat-label>
                    <input matInput currencyMask [options]="{ prefix: '', thousands: '.', decimal: ',', suffix: '%  ' }"
                        formControlName="percentualImposto">
                </mat-form-field>
            </p>
            <p>
                <mat-form-field>
                    <mat-label>NCM</mat-label>
                    <mat-select formControlName="ncm">
                        <mat-option value="22030000">Carne Bovina 22030000</mat-option>
                        <mat-option value="22021000">Refri/Agua: 22021000</mat-option>
                    </mat-select>
                    <mat-error *ngIf="form.invalid">{{obterMensagemErro('ncm')}}</mat-error>
                </mat-form-field>
                <mat-form-field>
                    <mat-label>CFOP</mat-label>
                    <mat-select formControlName="cfop">
                        <mat-option value="5405">Carne Bovina: 5405</mat-option>
                    </mat-select>
                    <mat-error *ngIf="form.invalid">{{obterMensagemErro('cfop')}}</mat-error>
                </mat-form-field>
            </p>
            <p>
                <mat-form-field>
                    <mat-label>Situação Tributária</mat-label>  
                    <mat-select formControlName="icmsSituacaoTributaria">
                        <mat-option value="60">Carne Bovina: 60</mat-option>
                    </mat-select>
                    <mat-error *ngIf="form.invalid">{{obterMensagemErro('icmsSituacaoTributaria')}}</mat-error>
                </mat-form-field>
            </p>
        </mat-card-content>
        <mat-card-actions>
            <button mat-raised-button color="primary" (click)="salvar()" [disabled]="form.invalid">Salvar</button>
            <button mat-raised-button color="warn" [routerLink]="['/estoque/produtos']">Cancelar</button>
        </mat-card-actions>
    </mat-card>
</section>